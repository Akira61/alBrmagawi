<!DOCTYPE html>
<html lang="en">

<head>
	
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Edumin - Bootstrap Admin Dashboard </title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
    <link rel="stylesheet" href="/vendor/bootstrap-select/dist/css/bootstrap-select.min.css">
	<!-- Datatable -->
    <link href="/vendor/datatables/css/jquery.dataTables.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">

</head>

<body>

	<!-- side navbar -->
	<%- include('../../../components/dashboardNavbar.ejs') %>
    
        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">
            <!-- row -->
            <div class="container-fluid">
				    
                <div class="row page-titles mx-0" style="background-color: #262932;">
                    <div class="col-sm-6 p-md-0">
                        <div class="welcome-text">
                            <h4 style="color: #fff;">All Professors</h4>
                        </div>
                    </div>
                    <div class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                            <li class="breadcrumb-item active"><a href="javascript:void(0);">Professors</a></li>
                            <li class="breadcrumb-item active"><a href="javascript:void(0);">All Professors</a></li>
                        </ol>
                    </div>
                </div>
				
				<div class="row">
					<div class="col-lg-12">
						<ul class="nav nav-pills mb-3">
							<li class="nav-item"><a href="#list-view" data-toggle="tab" class="nav-link btn-primary mr-1">List View</a></li>
							<li class="nav-item"><a href="#grid-view" data-toggle="tab" class="nav-link btn-primary">Grid View</a></li>
						</ul>
					</div>
					<div class="col-lg-12">
						<div class="row tab-content">
							<div id="list-view" class="tab-pane fade active show col-lg-12">
								<div class="card">
									<div class="card-header" style="background-color: #262932;">
										<h4 class="card-title" style="color: #fff;">All Professors</h4>
										<a href="add-professor.html" class="btn btn-primary">+ Add new</a>
									</div>
									<div class="card-body">
										<div class="table-responsive">
											<table id="example3" class="display" style="min-width: 845px" >
												<thead>
													<tr>
														<th></th>
														<th style="color: #fff;">Name</th>
														<th style="color: #fff;">Department</th>
														<th style="color: #fff;">Gender</th>
														<th style="color: #fff;">Education</th>
														<th style="color: #fff;">Mobile</th>
														<th style="color: #fff;">Email</th>
														<th style="color: #fff;">Joining Date</th>
														<th style="color: #fff;">Action</th>
													</tr>
												</thead>
												<tbody>

													<% data.forEach(e => { %>
														<tr>
															<td><img class="rounded-circle" width="35" src="/images/profile/education/Avatar.png" alt=""></td>
															<td style="color: #fff;"><%= e.first_name + ' ' + e.last_name %></td>
															<td style="color: #fff;"><%= e.department %></td>
															<td style="color: #fff;"><%= e.gender %></td>
															<td style="color: #fff;"><%= e.education %></td>
															<td><a href="javascript:void(0);"><strong style="color: #fff;"><%= e.phone_number %></strong></a></td>
															<td><a href="javascript:void(0);"><strong style="color: #fff;"><%= e.email %></strong></a></td>
															<td style="color: #fff;"><%= e.birth_day %></td>
															<td>
																<a href="/dashboard/edit-professor?user_id=<%= e.user_id %>" class="btn btn-sm btn-primary"><i class="la la-pencil"></i></a>
																<a onclick="deleteProfessor('<%= e.user_id%>')" href="javascript:void(0);" class="btn btn-sm btn-danger"><i class="la la-trash-o"></i></a>
															</td>												
														</tr>
													<% }) %>
												</tbody>
											</table>
										</div>
									</div>
                                </div>
                            </div>
							<div id="grid-view" class="tab-pane fade col-lg-12">
								<div class="row">
									<% data.forEach(e => { %>
										<div class="col-lg-4 col-md-6 col-sm-6 col-12">
											<div class="card card-profile">
												<div class="card-header justify-content-end pb-0" style="background-color: #262932;">
													<div class="dropdown">
														<button class="btn btn-link" type="button" data-toggle="dropdown">
															<span class="dropdown-dots fs--1"></span>
														</button>
														<div class="dropdown-menu dropdown-menu-right border py-0">
															<div class="py-2">
																<a class="dropdown-item" href="/dashboard/edit-professor?user_id=<%= e.user_id %>">Edit</a>
																<a class="dropdown-item text-danger" onclick="deleteProfessor('<%= e.user_id%>')" href="javascript:void(0);">Delete</a>
															</div>
														</div>
													</div>
												</div>
												<div class="card-body pt-2">
													<div class="text-center">
														<div class="profile-photo">
															<img src="/images/profile/education/Avatar.png" width="100" class="img-fluid rounded-circle" alt="" style="position: relative; z-index: 1;">
														</div>
														<h3 class="mt-4 mb-1" style="color: #fff;"><%= e.first_name + ' ' + e.last_name %></h3>
														<p class="text-muted" style="color: #828690;"><%= e.designation %></p>
														<ul class="list-group mb-3 list-group-flush">
															<li class="list-group-item px-0 d-flex justify-content-between">
																<span class="mb-0" style="color: #828690;">Gender :</span><strong style="color: #828690;"><%= e.gender %></strong></li>
															<li class="list-group-item px-0 d-flex justify-content-between">
																<span class="mb-0" style="color: #828690;">Phone No. :</span><strong style="color: #828690;"><%= e.phone_number %></strong></li>
															<li class="list-group-item px-0 d-flex justify-content-between">
																<span class="mb-0" style="color: #828690;">Email:</span><strong style="color: #828690;"><%= e.email %></strong>
															</li>
															<li class="list-group-item px-0 d-flex justify-content-between">
																<span class="mb-0" style="color: #828690;">Department:</span><strong style="color: #828690;"><%= e.department %></strong>
															</li>
															<li class="list-group-item px-0 d-flex justify-content-between">
																<span class="mb-0" style="color: #828690;">Education:</span><strong style="color: #828690;"><%= e.education %></strong>
															</li>
														</ul>
														<a class="btn btn-outline-primary btn-rounded mt-3 px-4" href="professor-profile.html">Read More</a>
													</div>
												</div>
											</div>
										</div>
									<% }) %>
									
								</div>
							</div>
						</div>
					</div>
				</div>
				
            </div>
        </div>
        <!--**********************************
            Content body end
        ***********************************-->


        <!--**********************************
            Footer start
        ***********************************-->
        <div class="footer">
            <div class="copyright" style="background-color: #262932;">
                <p style="color: #fff;">Copyright © Designed &amp; Developed by <a href="../index.htm" target="_blank">AlBrmagawi</a> 2023</p>
            </div>
        </div>
        <!--**********************************
            Footer end
        ***********************************-->

		<!--**********************************
           Support ticket button start
        ***********************************-->

        <!--**********************************
           Support ticket button end
        ***********************************-->


    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <!-- Required vendors -->
    <script src="/vendor/global/global.min.js"></script>
	<script src="/vendor/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
    <script src="/js/custom.min.js"></script>
    <script src="/js/dlabnav-init.js"></script>	
	
	<!-- Datatable -->
    <script src="/vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="/js/plugins-init/datatables.init.js"></script>
	
    <!-- Svganimation scripts -->
    <script src="/vendor/svganimation/vivus.min.js"></script>
    <script src="/vendor/svganimation/svg.animation.js"></script>
    <script src="/js/styleSwitcher.js"></script>
	<script>

		async function deleteProfessor(user_id){
			console.log(user_id)
			const worning = confirm('are you sure?');
			if(worning){
				// const res = await fetch(`http://localhost:4545/dashboard/delete-professor?user_id=${user_id}`,{method : 'delete'})
				const response = await fetch(`/dashboard/delete-professor?user_id=${user_id}`, {
                method : "DELETE",
                credentials :"include",
            });
			}
		}
	</script>
</body>
</html>